<div class="container">
  <div class="row">
    <div class="col-md-3">
      <%= render "public/shared/info", member: current_member %>
    </div>
    <div class="col-md-7">
      <table class="table">
        <thead>
          <tr>
            <th>id</th>
            <th>ユーザー名</th>
            <th>フォロー</th>
            <th>フォロワー</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @members.each do |member| %>
            <tr>
              <td><%= member.id %></td>
              <td><%= link_to member.name, member_path(member.id) %></td>
              <td><%= link_to "フォロー: " + member.followings.count.to_s, member_followings_path(member.id) %></td>
              <td><%= link_to "フォロワー: " + member.followers.count.to_s, member_followers_path(member.id) %></td>
              <td>
                <!--ログインしていなければ処理終了-->
                <% if !member_signed_in? %>
                <!--自分のフォローボタンを表示しない処理-->
                <% elsif member.id == current_member.id %>
                <!--相手をフォローしているか確認-->
                <% elsif current_member.following?(member) %>
                  <%= link_to "リフォロー", member_relationships_path(member.id), method: :delete %>
                <% else %>
                  <%= link_to "フォロー", member_relationships_path(member.id), method: :post %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>